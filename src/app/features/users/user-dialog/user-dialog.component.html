<h1 mat-dialog-title>{{ mode === 'add' ? 'הוסף משתמש' : 'ערוך משתמש' }}</h1>

<div mat-dialog-content>
    <form [formGroup]="form">
        <mat-form-field appearance="fill" class="full-width">
            <mat-label>שם</mat-label>
            <input matInput formControlName="userName" />
            @if (form.get('userName')?.hasError('required')) {
            <mat-error>חובה להזין שם משתמש</mat-error>
            } @else if (form.get('userName')?.hasError('minlength')) {
            <mat-error>שם משתמש חייב להיות באורך מינימלי של 3 תווים</mat-error>
            } 
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
            <mat-label>מייל</mat-label>
            <input matInput formControlName="email" />
            @if (form.get('email')?.hasError('required')) {
            <mat-error>חובה להזין כתובת מייל</mat-error>
            } @else if (form.get('email')?.hasError('email')) {
            <mat-error>כתובת המייל אינה תקינה</mat-error>
            } @else if (form.get('email')?.hasError('emailExists')) {
            <mat-error>מייל כבר קיים</mat-error>
            }
        </mat-form-field>
        @if(mode === 'add') {
        <mat-form-field appearance="fill" class="full-width">
            <mat-label>סיסמה</mat-label>
            <input matInput formControlName="password" type="password" />
            @if (form.get('password')?.hasError('required')) {
            <mat-error>חובה להזין סיסמה</mat-error>
            } @else if (form.get('password')?.hasError('minlength')) {
            <mat-error>סיסמה חייבת להיות באורך מינימלי של 6 תווים</mat-error>
            } 
        </mat-form-field>
        }
    </form>
</div>

<div mat-dialog-actions align="end">
    <button mat-button (click)="close()">ביטול</button>
    <button mat-button color="primary" (click)="save()">שמור</button>
</div>